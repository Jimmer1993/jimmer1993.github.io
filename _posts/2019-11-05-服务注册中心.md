---
layout:     post
title:      服务注册中心
subtitle:   服务注册中心
date:       2019-11-03
author:     Jimmer
header-img: img/post-bg-cook.jpg
catalog: true
tags:
    - 服务注册中心

---

## 服务注册中心 笔记

### 问题

- 服务注册中心作用
- 服务注册中心技术选型
- 服务注册中心生产问题（高并发？）

### 1. 服务注册中心作用

- 服务注册中心的核心功能  

### 2.服务注册中心技术选型

#### 2.1 consul

#### 2.2 Eureka

#### 2.3 zookeeper

### 3.生产问题

#### 3.1 如果需要部署上万服务实例，现有的服务注册中心能否抗住？如何优化？

- eureka  
缺点：每个服务要接受所有实例的注册和心跳，实例过多时，负载太大。  
解决方案：自研注册服务中心（二次开发？）  
服务注册中心分组，每组只负责一部分实例的注册和心跳，并且组内再分master和slave，保证**高可用**。  
服务注册时，保证master和slave都注册成功，保证**一致性**。
服务拉取注册表时，拉取所有分组，获得全量注册表。  
更新一步，服务拉取注册表时，可以按需拉取，只拉取自己关心的分组，获得局部注册表，进一步**降低负载**。

- zookeeper

问题：实例过多时，实例上下线时要通知所有其他实例，在实例过多时，会造成短时间的负载过大。  
解决方案：同上，服务注册中心分组。
